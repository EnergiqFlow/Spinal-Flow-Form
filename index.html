import React, { useState } from 'react';
import { ChevronRight, ChevronLeft, Heart, Leaf, User, Calendar, Droplets, Moon } from 'lucide-react';

const SpinalFlowQuestionnaire = () => {
  const [currentStep, setCurrentStep] = useState(0);
  const [formData, setFormData] = useState({
    firstName: '',
    lastName: '',
    age: '',
    weight: '',
    currentSymptoms: '',
    stressLevel: '',
    happinessLevel: '',
    symptoms: [],
    bodyDescription: '',
    whenStarted: '',
    perceivedCause: '',
    impacts: [],
    impactOther: '',
    stoppingFrom: '',
    aggravatingActivities: '',
    spinalFlowGoals: '',
    readyForChange: ''
  });

  const steps = [
    { title: "Welcome", icon: Heart },
    { title: "Personal", icon: User },
    { title: "Wellness", icon: Leaf },
    { title: "Lifestyle", icon: Droplets },
    { title: "Health History", icon: Calendar },
    { title: "Final Details", icon: Moon }
  ];

  const symptomsList = [
    'Dizziness', 'Fainting', 'Loss of memory', 'Tension and irritability', 'Headaches', 'Tinnitus',
    'Migraine', 'Hearing problems', 'Loss of smell/taste', 'Light bothers eyes', 'Insomnia/sleeping issues',
    'Neck pain/stiffness', 'Thyroid issues', 'Numbness of fingers', 'Shoulder pain', 'Cold hands/feet',
    'Nervousness', 'Pins and needles in arms', 'Weight problems', 'Cold/flu symptoms', 'Chest pain',
    'Allergies', 'Cold sweats', 'Shortness of breath', 'Pain in mid-spine', 'Stomach/digestive issues',
    'Constipation/diarrhoea', 'Sciatica', 'Menstrual pain', 'Lower back pain', 'Balance loss',
    'Numb toes', 'Stress', 'Depression', 'Chronic fatigue', 'Pins and needles Legs/Feet', 'Knee pain', 'Fibromyalgia'
  ];

  const updateFormData = (field, value) => {
    setFormData(prev => ({ ...prev, [field]: value }));
  };

  const handleArrayToggle = (field, value) => {
    setFormData(prev => ({
      ...prev,
      [field]: prev[field].includes(value) 
        ? prev[field].filter(item => item !== value)
        : [...prev[field], value]
    }));
  };

  const nextStep = () => {
    if (currentStep < steps.length - 1) {
      setCurrentStep(currentStep + 1);
    }
  };

  const prevStep = () => {
    if (currentStep > 0) {
      setCurrentStep(currentStep - 1);
    }
  };

  const renderWelcome = () => (
    <div className="text-center space-y-8">
      <div className="w-48 h-48 mx-auto rounded-full flex items-center justify-center shadow-2xl relative overflow-hidden" style={{
        background: 'linear-gradient(135deg, #475569 0%, #334155 100%)'
      }}>
        <div className="absolute inset-0" style={{
          background: 'linear-gradient(135deg, rgba(71, 85, 105, 0.3) 0%, rgba(51, 65, 85, 0.6) 100%)'
        }}></div>
        <div className="relative z-10">
          <div className="text-4xl font-serif tracking-wide mb-2" style={{fontFamily: 'Georgia, serif', color: '#b45309'}}>
            <span className="relative">
              <span>Ene</span>
              <span className="relative">
                <span>r</span>
                <span className="absolute -top-1 right-0 w-2.5 h-3.5">
                  <svg viewBox="0 0 24 24" fill="currentColor" className="w-full h-full opacity-90" style={{color: '#b45309'}}>
                    <path d="M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z"/>
                  </svg>
                </span>
              </span>
              <span>giq</span>
            </span>
          </div>
          <div className="text-sm font-light tracking-widest" style={{color: '#b45309'}}>SPINAL FLOW</div>
        </div>
      </div>
      <div>
        <h1 className="text-4xl font-light text-slate-800 mb-4">Spinal Flow Wellness Journey</h1>
        <p className="text-xl text-slate-600 italic mb-6">"A little action often spurs a lot of momentum" - Noah Scalin</p>
        <div className="max-w-2xl mx-auto text-slate-700 leading-relaxed">
          <p className="mb-4">
            Welcome to your wellness journey. There is an innate intelligence inside every human body to grow, repair, and heal itself.
          </p>
          <p>
            The Spinal Flow Technique is a philosophy, a science, and an intuitive hands-on approach that helps your 
            spine and nervous system release stored stressors, enabling your body's natural healing wisdom to flow freely.
          </p>
        </div>
      </div>
    </div>
  );

  const renderPersonalInfo = () => (
    <div className="space-y-6">
      <h2 className="text-2xl font-light text-slate-800 text-center mb-8">Let's get to know you</h2>
      
      <div className="grid md:grid-cols-2 gap-6">
        <div>
          <label className="block text-slate-700 font-medium mb-2">First Name *</label>
          <input
            type="text"
            value={formData.firstName}
            onChange={(e) => updateFormData('firstName', e.target.value)}
            className="w-full px-4 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-copper-400 focus:border-transparent transition-all"
            placeholder="Your first name"
          />
        </div>
        <div>
          <label className="block text-slate-700 font-medium mb-2">Last Name *</label>
          <input
            type="text"
            value={formData.lastName}
            onChange={(e) => updateFormData('lastName', e.target.value)}
            className="w-full px-4 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-copper-400 focus:border-transparent transition-all"
            placeholder="Your last name"
          />
        </div>
      </div>

      <div className="grid md:grid-cols-2 gap-6">
        <div>
          <label className="block text-slate-700 font-medium mb-3">Age Range</label>
          <div className="space-y-2">
            {['18-25', '26-50', '51-75', '76+'].map(range => (
              <label key={range} className="flex items-center space-x-3 cursor-pointer">
                <input
                  type="radio"
                  name="age"
                  value={range}
                  checked={formData.age === range}
                  onChange={(e) => updateFormData('age', e.target.value)}
                  className="w-4 h-4 text-copper-600"
                />
                <span className="text-slate-700">{range}</span>
              </label>
            ))}
          </div>
        </div>

        <div>
          <label className="block text-slate-700 font-medium mb-3">Weight Range</label>
          <div className="space-y-2">
            {['<50 kg', '50-69 kg', '70-89 kg', '90-109 kg', '>110 kg'].map(range => (
              <label key={range} className="flex items-center space-x-3 cursor-pointer">
                <input
                  type="radio"
                  name="weight"
                  value={range}
                  checked={formData.weight === range}
                  onChange={(e) => updateFormData('weight', e.target.value)}
                  className="w-4 h-4 text-copper-600"
                />
                <span className="text-slate-700">{range}</span>
              </label>
            ))}
          </div>
        </div>
      </div>

      <div>
        <label className="block text-slate-700 font-medium mb-2">How are you feeling right now?</label>
        <textarea
          value={formData.currentSymptoms}
          onChange={(e) => updateFormData('currentSymptoms', e.target.value)}
          className="w-full px-4 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-copper-400 focus:border-transparent h-24"
          placeholder="Tell us about your current state of health and any symptoms you're experiencing..."
        />
      </div>
    </div>
  );

  const renderCurrentWellness = () => (
    <div className="space-y-8">
      <h2 className="text-2xl font-light text-slate-800 text-center mb-8">Your Current Wellness</h2>
      
      <div className="grid md:grid-cols-2 gap-8">
        <div>
          <label className="block text-slate-700 font-medium mb-4">Stress Level (1-10)</label>
          <div className="flex items-center space-x-2">
            <span className="text-sm text-slate-500">Low</span>
            <input
              type="range"
              min="1"
              max="10"
              value={formData.stressLevel}
              onChange={(e) => updateFormData('stressLevel', e.target.value)}
              className="flex-1 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"
            />
            <span className="text-sm text-slate-500">High</span>
            <span className="w-8 text-center font-medium text-copper-600">{formData.stressLevel || 5}</span>
          </div>
        </div>

        <div>
          <label className="block text-slate-700 font-medium mb-4">Happiness Level (1-10)</label>
          <div className="flex items-center space-x-2">
            <span className="text-sm text-slate-500">Low</span>
            <input
              type="range"
              min="1"
              max="10"
              value={formData.happinessLevel}
              onChange={(e) => updateFormData('happinessLevel', e.target.value)}
              className="flex-1 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"
            />
            <span className="text-sm text-slate-500">High</span>
            <span className="w-8 text-center font-medium text-copper-600">{formData.happinessLevel || 5}</span>
          </div>
        </div>
      </div>

      <div>
        <label className="block text-slate-700 font-medium mb-4">What is your body telling you? (Select all that apply)</label>
        <div className="grid grid-cols-2 md:grid-cols-3 gap-3 max-h-64 overflow-y-auto">
          {symptomsList.map(symptom => (
            <label key={symptom} className="flex items-center space-x-2 cursor-pointer p-2 hover:bg-slate-50 rounded">
              <input
                type="checkbox"
                checked={formData.symptoms.includes(symptom)}
                onChange={() => handleArrayToggle('symptoms', symptom)}
                className="w-4 h-4 text-copper-600 rounded"
              />
              <span className="text-sm text-slate-700">{symptom}</span>
            </label>
          ))}
        </div>
      </div>
    </div>
  );

  const renderStepContent = () => {
    switch (currentStep) {
      case 0: return renderWelcome();
      case 1: return renderPersonalInfo();
      case 2: return renderCurrentWellness();
      case 3: return <div className="text-center text-slate-600">Lifestyle section coming soon...</div>;
      case 4: return <div className="text-center text-slate-600">Health History section coming soon...</div>;
      case 5: return <div className="text-center text-slate-600">Final details section coming soon...</div>;
      default: return renderWelcome();
    }
  };

  return (
    <div className="min-h-screen" style={{
      background: 'linear-gradient(135deg, #b45309 0%, #475569 50%, #334155 100%)',
    }}>
      <div className="absolute inset-0" style={{
        backgroundImage: `url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d4a574' fill-opacity='0.15'%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Ccircle cx='30' cy='20' r='1.5'/%3E%3Ccircle cx='50' cy='30' r='1'/%3E%3Ccircle cx='20' cy='40' r='1.5'/%3E%3Ccircle cx='40' cy='50' r='2'/%3E%3C/g%3E%3C/svg%3E")`,
        opacity: 0.3
      }}></div>
      
      <div className="max-w-4xl mx-auto px-4 py-8 relative z-10">
        {/* Spinal Flow with perfectly even spacing */}
        <div className="mb-8">
          <div className="relative mb-16">
            {/* Flow lines */}
            <svg className="absolute inset-0 w-full h-40" viewBox="0 0 900 160" preserveAspectRatio="none">
              <path
                d="M80,80 Q200,60 320,100 Q440,120 560,60 Q680,20 800,80"
                stroke="url(#spinalFlowGradient)"
                strokeWidth="10"
                fill="none"
                className="opacity-85"
              />
              <defs>
                <linearGradient id="spinalFlowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stopColor="#1e293b" />
                  <stop offset="30%" stopColor="#475569" />
                  <stop offset="50%" stopColor="#b45309" />
                  <stop offset="70%" stopColor="#475569" />
                  <stop offset="100%" stopColor="#1e293b" />
                </linearGradient>
              </defs>
            </svg>
            
            {/* Evenly spaced circles */}
            <div className="relative h-40">
              {steps.map((step, index) => {
                const Icon = step.icon;
                // SMOOTH EVEN SPACING across the full page width
                const positions = [
                  { left: '10%', top: '45%', size: 50 },   // Welcome
                  { left: '26%', top: '30%', size: 75 },   // Personal  
                  { left: '42%', top: '40%', size: 65 },   // Wellness 
                  { left: '58%', top: '15%', size: 85 },   // Lifestyle
                  { left: '74%', top: '8%', size: 70 },    // Health History
                  { left: '90%', top: '45%', size: 45 }    // Final Details
                ];
                
                const pos = positions[index];
                
                return (
                  <div key={index} className={`absolute flex flex-col items-center transition-all duration-700`} 
                       style={{left: pos.left, top: pos.top, transform: 'translateX(-50%)'}}>
                    <div className={`rounded-full flex items-center justify-center mb-2 transition-all duration-500 shadow-lg border-2 ${
                      index <= currentStep 
                        ? 'bg-gradient-to-br from-slate-600 to-slate-700 shadow-slate-400 border-copper-400/50 transform scale-105' 
                        : 'bg-stone-200 shadow-stone-300 border-stone-400/60'
                    }`} style={{
                      color: index <= currentStep ? '#b45309' : '#78716c', 
                      width: `${pos.size}px`, 
                      height: `${pos.size}px`
                    }}>
                      <Icon size={Math.max(16, pos.size * 0.3)} />
                    </div>
                    <div className={`px-2 py-1 rounded-md text-center transition-all duration-300 ${
                      index <= currentStep ? 'bg-slate-900/80 shadow-md' : 'bg-slate-700/60'
                    }`} style={{
                      minWidth: '60px', 
                      maxWidth: '80px',
                      fontSize: '10px'
                    }}>
                      <span className="text-white font-semibold leading-tight block">
                        {step.title}
                      </span>
                    </div>
                  </div>
                );
              })}
            </div>
          </div>
          
          <div className="w-full bg-stone-200 h-3 rounded-full shadow-inner">
            <div 
              className="bg-gradient-to-r from-copper-400 via-slate-600 to-copper-500 h-full rounded-full transition-all duration-700 shadow-sm"
              style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
            />
          </div>
        </div>

        {/* Content */}
        <div style={{
          background: 'rgba(247, 243, 240, 0.85)',
          backdropFilter: 'blur(10px)',
          borderRadius: '12px',
          boxShadow: '0 10px 25px rgba(0,0,0,0.1)',
          padding: '32px',
          marginBottom: '32px',
          border: '1px solid rgba(240, 230, 210, 0.5)'
        }}>
          {renderStepContent()}
        </div>

        {/* Navigation */}
        <div className="flex justify-between">
          <button
            onClick={prevStep}
            disabled={currentStep === 0}
            className={`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-300 ${
              currentStep === 0
                ? 'bg-slate-100 text-slate-400 cursor-not-allowed'
                : 'bg-slate-200 text-slate-700 hover:bg-slate-300 shadow-sm hover:shadow-md'
            }`}
          >
            <ChevronLeft size={20} />
            <span>Previous</span>
          </button>

          <button
            onClick={nextStep}
            disabled={currentStep === steps.length - 1}
            className={`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-300 ${
              currentStep === steps.length - 1
                ? 'bg-slate-100 text-slate-400 cursor-not-allowed'
                : 'bg-gradient-to-r from-slate-600 to-slate-700 text-white hover:from-slate-700 hover:to-slate-800 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5'
            }`}
          >
            <span>{currentStep === steps.length - 1 ? 'Complete' : 'Next'}</span>
            <ChevronRight size={20} />
          </button>
        </div>
      </div>

      <style jsx>{`
        .text-copper-600 { color: #b45309; }
        .bg-copper-400 { background-color: #c49363; }
        .via-slate-600 { --tw-gradient-via: #475569; }
        .to-copper-500 { --tw-gradient-to: #b45309; }
        .from-copper-400 { --tw-gradient-from: #c49363; }
        .shadow-slate-400 { --tw-shadow-color: #94a3b8; }
        .shadow-stone-300 { --tw-shadow-color: #d6d3d1; }
        .border-copper-400\\/50 { border-color: rgba(196, 147, 99, 0.5); }
        .border-stone-400\\/60 { border-color: rgba(168, 162, 158, 0.6); }
      `}</style>
    </div>
  );
};

export default SpinalFlowQuestionnaire;
